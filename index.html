<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Terminal Operations Hub</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "types": "https://aistudiocdn.com/types@^0.1.1"
  }
}
</script>
    <style>
        :root {
            --brand-primary: #4f46e5;
            --brand-dark: #0f172a; /* slate-900 */
            --background-body: #f1f5f9;
            --background-card: #ffffff;
            --background-primary: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-tertiary: #64748b;
            --border-primary: #e2e8f0;
        }

        body {
            font-family: sans-serif;
            background-color: var(--background-body);
            color: var(--text-primary);
        }
        
        /* Base Component Styles */
        .card {
            background-color: var(--background-card);
            border: 1px solid var(--border-primary);
            border-radius: 0;
            box-shadow: none;
        }

        /* Button Styles - Increased padding for tablets */
        .btn-primary, .btn-secondary, .btn-danger, .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.25rem;
            font-size: 0.875rem;
            font-weight: 600;
            border-radius: 0;
            border: 1px solid transparent;
            transition: all 0.2s;
            cursor: pointer;
            white-space: nowrap;
        }
        .btn-primary { background-color: var(--brand-primary); color: white; border-color: var(--brand-primary); }
        .btn-primary:hover { background-color: #4338ca; }
        .btn-secondary { background-color: white; color: var(--text-secondary); border-color: var(--border-primary); }
        .btn-secondary:hover { background-color: #f8fafc; }
        .btn-danger { background-color: #dc2626; color: white; border-color: #dc2626; }
        .btn-danger:hover { background-color: #b91c1c; }
        .btn-icon { padding: 0.75rem; }
        .btn-icon.danger { color: #dc2626; }
        .btn-icon:hover { background-color: #f1f5f9; }
        .btn-suggestion {
            background-color: #f1f5f9;
            color: #475569;
            border-color: #e2e8f0;
            padding: 0.375rem 0.75rem;
            font-size: 0.8rem;
        }
        .btn-suggestion:hover { background-color: #e2e8f0; }

        /* Form Styles */
        label { display: block; margin-bottom: 0.25rem; font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); }
        input, select, textarea {
            display: block; width: 100%;
            padding: 0.75rem 1rem; /* Increased padding */
            border: 1px solid var(--border-primary);
            border-radius: 0;
            background-color: #f8fafc;
            color: var(--text-primary);
            font-size: 0.875rem;
        }
        input:focus, select:focus, textarea:focus { outline: 2px solid transparent; outline-offset: 2px; border-color: var(--brand-primary); box-shadow: none; }

        /* Tabs */
        .tab {
            padding: 0.75rem 0.5rem; /* Increased padding */
            border-bottom: 2px solid transparent;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
        }
        .tab:hover { color: var(--text-primary); }
        .tab.active { color: var(--brand-primary); border-color: var(--brand-primary); }
        
        /* Specialized Component Styles */
        .main-content { scrollbar-width: thin; scrollbar-color: #cbd5e1 #f1f5f9; }
        .responsive-modal { width: 95%; max-width: 50rem; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden; }
        .responsive-modal > div:nth-child(2) { overflow-y: auto; }
        .planning-list-row { display: grid; grid-template-columns: 1.5fr 1fr 2fr 1fr 1fr; align-items: center; gap: 1rem; padding: 0.75rem 1rem; }
        .compatibility-c { background-color: #dcfce7; color: #166534; }
        .compatibility-x { background-color: #fee2e2; color: #991b1b; }
        
        /* --- NEW SOF Slider Styles --- */
        .sof-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.25rem 0.75rem; /* More compact */
            border: 1px solid var(--border-primary);
            border-radius: 0;
            position: relative;
            min-height: 48px; /* More compact */
            background-color: var(--background-card);
        }
        
        .sof-item.pending { background-color: #f8fafc; }
        .sof-item.in-progress { background-color: #eff6ff; border-color: #93c5fd; }
        .sof-item.complete { background-color: #f0fdf4; border-color: #a7f3d0; }
        .sof-item.skipped { 
            background-color: #f1f5f9; /* slate-100 */ 
            color: #94a3b8; /* slate-400 */
            border-color: #e2e8f0; /* slate-200 */
        }
        .sof-item.skipped h5 {
            text-decoration: line-through;
        }
        .sof-item.skipped .sof-icon {
            background-color: #cbd5e1; /* slate-300 */
        }

        .sof-icon { 
            width: 2.5rem; height: 2.5rem; /* 40px */
            border-radius: 0; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: white;
            flex-shrink: 0;
        }
        .sof-item.pending .sof-icon { background-color: #94a3b8; }
        
        .sof-slider-track {
            position: relative;
            width: 8rem; /* Slightly smaller track */
            height: 2.5rem; /* 40px, big enough for gloves */
            border-radius: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 0.5rem;
            box-shadow: none;
            flex-shrink: 0;
            touch-action: none; /* Prevent scrolling while dragging slider */
            cursor: grab;
        }
        .sof-slider-track:active {
            cursor: grabbing;
        }
        .sof-slider-track:active .sof-slider-thumb {
             transform: scale(1.05);
        }

        .sof-slider-thumb {
            position: absolute;
            top: 0;
            left: 0;
            width: 2.5rem; /* 40px */
            height: 2.5rem; /* 40px */
            border-radius: 0;
            background-color: white;
            border: 3px solid; /* Slightly thinner border */
            box-shadow: none;
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: transform 0.2s ease-out;
        }

        .sof-slider-target-icon {
            font-size: 1.25rem; /* 20px */
        }
        
        /* In-progress state (slide right to complete) */
        .sof-item.in-progress .sof-slider-track { background-color: #dcfce7; } /* green-100 */
        .sof-item.in-progress .sof-slider-track .sof-slider-target-icon { color: #166534; } /* green-800 */
        .sof-item.in-progress .sof-slider-thumb { border-color: #22c55e; } /* green-500 */
        .sof-item.in-progress .sof-slider-thumb .sof-slider-icon { color: #22c55e; }

        /* Complete state (slide left to undo) */
        .sof-item.complete .sof-slider-track { background-color: #e2e8f0; } /* slate-200 */
        .sof-item.complete .sof-slider-track .sof-slider-target-icon { color: #475569; } /* slate-600 */
        .sof-item.complete .sof-slider-thumb { border-color: #22c55e; } /* green-500 */
        .sof-item.complete .sof-slider-thumb .sof-slider-icon { color: #22c55e; } /* green-500 */
        
        .sof-slider-icon {
            font-size: 1.25rem; /* 20px */
            pointer-events: none; /* Make sure icon doesn't interfere with drag events */
        }

        .sof-edit-btn {
            background-color: transparent;
            border: 1px solid var(--border-primary);
            color: var(--text-secondary);
            padding: 0.375rem 0.75rem;
            font-size: 0.8rem;
            font-weight: 600;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.2s;
            flex-shrink: 0;
        }
        .sof-edit-btn:hover {
            background-color: #f1f5f9; /* slate-100 */
            border-color: #cbd5e1; /* slate-300 */
            color: var(--text-primary);
        }
        .sof-item h5 .fa-exclamation-triangle {
            cursor: help;
        }
        
        .activity-log-item { display: flex; gap: 1rem; padding: 0.5rem; font-size: 0.875rem; color: var(--text-secondary); }
        .activity-log-item .time { font-weight: 600; color: var(--text-primary); }
        .activity-log-item .user { font-style: italic; }
        .status-passed { color: #16a34a; font-weight: 600; }
        .status-failed { color: #dc2626; font-weight: 600; }
        .tank-level-indicator {
            position: relative;
            width: 100%;
            height: 1.5rem;
            background-color: #e2e8f0;
            border-radius: 0;
            overflow: hidden;
        }
        .tank-level-bar {
            position: absolute;
            top: 0;
            bottom: 0;
            height: 100%;
            transition: all 0.5s ease;
        }
        .tank-level-current {
            background-color: #64748b; /* slate-500 */
            z-index: 10;
        }
        .tank-level-transfer-in {
            background-color: #22c55e; /* green-500 */
            opacity: 0.7;
            z-index: 11;
        }
        .tank-level-transfer-out {
            background: repeating-linear-gradient(
                -45deg,
                #f1f5f9,
                #f1f5f9 5px,
                #e2e8f0 5px,
                #e2e8f0 10px
            );
            z-index: 9;
        }
        .tank-level-overfill {
            background-color: #ef4444; /* red-500 */
        }
        
        /* Planning Board Grid */
        .planning-grid-container { display: flex; flex-direction: column; border: 1px solid var(--border-primary); border-radius: 0; }
        .planning-grid-header { display: flex; flex-shrink: 0; background-color: #f8fafc; border-bottom: 1px solid var(--border-primary); }
        .planning-grid-header-spacer { width: 5rem; flex-shrink: 0; border-right: 1px solid var(--border-primary); }
        .planning-grid-header-items { display: flex; }
        .planning-grid-header-item { width: 160px; text-align: center; padding: 0.75rem 0.5rem; font-weight: 600; color: var(--text-secondary); border-right: 1px solid var(--border-primary); }
        .planning-grid-scroll-area { position: relative; }
        .planning-grid-content-wrapper { position: relative; display: flex; }
        .planning-grid-timeline { width: 5rem; flex-shrink: 0; background-color: #f8fafc; }
        .planning-grid-main { position: relative; flex-grow: 1; }
        .planning-grid-item { position: absolute; border-radius: 0; padding: 0.25rem 0.5rem; color: white; cursor: pointer; overflow: hidden; font-size: 0.8rem; font-weight: 600; border: 1px solid rgba(0,0,0,0.1); box-shadow: none; z-index: 10; }
        .planning-grid-hold { position: absolute; background-color: rgba(239, 68, 68, 0.15); border-left: 3px solid #ef4444; color: #991b1b; padding: 0.25rem; font-size: 0.75rem; font-weight: 500; z-index: 15; cursor: pointer; overflow: hidden; }
        .planning-grid-pending-hold {
            position: absolute;
            background: repeating-linear-gradient(
                45deg,
                rgba(251, 191, 36, 0.1),
                rgba(251, 191, 36, 0.1) 10px,
                rgba(251, 191, 36, 0.2) 10px,
                rgba(251, 191, 36, 0.2) 20px
            );
            border-left: 3px solid #f59e0b;
            color: #92400e;
            padding: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
            z-index: 14; /* Just below approved holds */
            cursor: pointer;
            overflow: hidden;
        }
        .current-time-indicator { position: absolute; height: 2px; background-color: #dc2626; z-index: 25; pointer-events: none; }
        .current-time-indicator::before { content: ''; position: absolute; top: -4px; left: -5px; width: 10px; height: 10px; background-color: #dc2626; border-radius: 0; }
        .selection-box { position: absolute; background-color: rgba(79, 70, 229, 0.2); border: 1px dashed var(--brand-primary); z-index: 10; pointer-events: none; }
        .conflicted-op { border: 2px dashed #ef4444 !important; }

        .manpower-schedule-item {
            position: absolute;
            background-color: rgba(139, 92, 246, 0.7); /* violet-500 with higher opacity */
            border: 1px solid #6d28d9; /* violet-700 solid */
            border-radius: 0;
            padding: 0.25rem 0.5rem;
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            overflow: hidden;
            pointer-events: none; /* Crucial for read-only */
            z-index: 16; /* In front of ops (10) and holds (14/15) */
        }
        
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        .top-scrollbar::-webkit-scrollbar {
            height: 16px; /* Chunky and easy to click */
        }
        .top-scrollbar::-webkit-scrollbar-track {
            background-color: #f1f5f9; /* slate-100 */
            border-bottom: 1px solid var(--border-primary);
        }
        .top-scrollbar::-webkit-scrollbar-thumb {
            background-color: #94a3b8; /* slate-400 */
            border-radius: 8px;
            border: 4px solid #f1f5f9; /* Match track for padding effect */
            background-clip: padding-box;
        }
        .top-scrollbar::-webkit-scrollbar-thumb:hover {
            background-color: #64748b; /* slate-500 */
        }
        /* Firefox fallback */
        .top-scrollbar {
            scrollbar-width: auto;
            scrollbar-color: #94a3b8 #f1f5f9; /* thumb track */
        }

        /* Planning Grid Item Colors - UPDATED SCHEME */
        .status-rejected { background-color: #be123c; } /* rose-700 - Red for issues/cancelled */
        .status-completing { background-color: #94a3b8; } /* slate-400 - Light grey for final steps */
        .status-departed { background-color: #475569; } /* slate-600 - Grey for completed */
        .status-loading { background-color: #16a34a; } /* green-600 - Green for active/loading */
        .status-arrived { background-color: #1d4ed8; } /* blue-700 - Dark blue for arrived */
        .status-approved { background-color: #a3e635; color: black; } /* lime-500 - Light green for approved/waiting */
        .status-delayed { background-color: #be123c; } /* Same red as rejected */
        .status-planned { background-color: #60a5fa; color: black; } /* blue-400 - Light blue for planned */

        /* Legend */
        .legend-container { display: flex; flex-wrap: wrap; align-items: center; gap: 0.5rem 1.5rem; padding-left: 0.5rem; }

        /* Planning view toggle */
        .planning-board-view-toggle { display: inline-flex; background-color: #e2e8f0; border-radius: 0; padding: 0.25rem; }
        .view-toggle-btn { padding: 0.375rem 0.75rem; border: none; background-color: transparent; border-radius: 0; font-size: 1rem; color: var(--text-secondary); cursor: pointer; }
        .view-toggle-btn.active { background-color: white; color: var(--brand-primary); box-shadow: none; }

        /* Modality filter */
        .planning-board-filters { display: inline-flex; background-color: #e2e8f0; border-radius: 0; padding: 0.25rem; }
        .filter-btn { padding: 0.75rem 1.25rem; border: none; background-color: transparent; border-radius: 0; font-size: 0.9rem; font-weight: 600; color: var(--text-secondary); cursor: pointer; }
        .filter-btn.active { background-color: white; color: var(--brand-primary); box-shadow: none; }

        /* Stepped Progress Bar */
        .stepped-progress-bar { display: flex; gap: 4px; width: 100%; }
        .progress-step { flex: 1; text-align: center; padding: 1rem 0.5rem; font-size: 0.875rem; font-weight: 600; border-radius: 0; transition: all 0.3s; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .progress-step span { display: block; }
        .step-pending { background-color: #e2e8f0; color: #64748b; }
        .step-active { background-color: #3b82f6; color: white; }
        .step-complete { background-color: #22c55e; color: white; }

        /* Blinking dot for notifications */
        .blinking-dot {
            height: 8px;
            width: 8px;
            background-color: #ef4444; /* red-500 */
            border-radius: 0;
            display: inline-block;
            margin-left: 6px;
            animation: blink-animation 1s infinite;
        }

        @keyframes blink-animation {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* --- Enlarged View Styles --- */
        .planning-grid-main.large-mode .planning-grid-item {
            font-size: 0.9rem;
            padding: 0.3rem 0.6rem;
        }
        .planning-grid-main.large-mode .planning-grid-item i {
            font-size: 1rem;
        }
        .planning-grid-main.large-mode .planning-grid-hold,
        .planning-grid-main.large-mode .planning-grid-pending-hold {
            font-size: 0.8rem;
            padding: 0.3rem;
        }
        .planning-grid-main.large-mode .manpower-schedule-item {
            font-size: 0.8rem;
            padding: 0.3rem 0.5rem;
        }
        .legend-container.large-mode span {
            font-size: 0.95rem;
        }

        /* --- Engineering UI Overrides for Tailwind --- */
        .rounded-sm, .rounded, .rounded-md, .rounded-lg, .rounded-xl, .rounded-2xl, .rounded-3xl, .rounded-full,
        [class*="rounded-t-"], [class*="rounded-r-"], [class*="rounded-b-"], [class*="rounded-l-"],
        [class*="rounded-tr-"], [class*="rounded-tl-"], [class*="rounded-br-"], [class*="rounded-bl-"] {
            border-radius: 0 !important;
        }
        .shadow-sm, .shadow, .shadow-md, .shadow-lg, .shadow-xl, .shadow-2xl, .shadow-inner {
            box-shadow: none !important;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
</body>
</html>